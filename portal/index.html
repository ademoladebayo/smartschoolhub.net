<!doctype html>
<html lang="en">


<!-- Mirrored from www.smarteyeapps.com/demo/html5-template-login-page/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 15 Oct 2021 08:09:11 GMT -->

<head id="common-library">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title id="title"> SMARTSCHOOLHUB.NET</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <!-- <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,600,700" rel="stylesheet"> -->
    <link rel="shortcut icon" href="asset/images/fav-2.html">
    <link rel="stylesheet" href="asset/css/bootstrap.min.css">
    <link rel="stylesheet" href="asset/css/fontawsom-all.min.css">
    <link rel="stylesheet" type="text/css" href="asset/css/style.css" />
    <link href="assets/css/lib/toastr/toastr.min.css" rel="stylesheet">
    <link href="assets/css/lib/sweetalert/sweetalert.css" rel="stylesheet">

    <link rel="manifest" href="manifest.json">
    <!-- ios support -->
    <link rel="apple-touch-icon" href="icons/72.png">
    <link rel="apple-touch-icon" href="icons/96.png">
    <link rel="apple-touch-icon" href="icons/128.png">
    <link rel="apple-touch-icon" href="icons/144.png">
    <link rel="apple-touch-icon" href="icons/152.png">
    <link rel="apple-touch-icon" href="icons/192.png">
    <link rel="apple-touch-icon" href="icons/384.png">
    <link rel="apple-touch-icon" href="icons/512.png">
    <meta name="apple-mobile-web-app-status-bar" content="#051f3e">
    <meta name="theme-color" content="#051f3e">
    <!-- Select 2 CSS -->
    <link rel="stylesheet" href="./css/select2.min.css">
</head>

<body style="font-family: Poppins; font-weight: bold;" onload="isSchoolSet()">
    <div class="container-fluid">
        <div class="container">
            <div class="col-xl-10 col-lg-11 login-container">
                <div class="row">
                    <div class="col-lg-7 img-box">
                        <img src="asset/images/login-banner.png" alt="">
                    </div>
                    <div class="col-lg-5 no-padding">
                        <div class="login-box">
                            <div style="display: flex;
                            justify-content: center;" class="row">
                                <h1><i style="color: #051f3e; display: flex;
                                justify-content: center;" class="fas fa-graduation-cap fa-xs"></i></h1>

                                <b>
                                    <h3 style="font-weight: bold; font-family: Poppins; color:#051f3e;">
                                        <!-- <i style="color: #051f3e;" class="fas fa-graduation-cap fa-xs"></i> -->
                                        SMARTSCHOOLHUB<small>.NET</small>
                                    </h3>
                                </b>

                            </div>
                            <br>

                            <h3 style="color: #ff9d01;text-align: center;"><b id="school_name">Welcome !</b></h3>

                            <div id="select_school" style="display: flex; justify-content: center;" class="row">
                                <p style="color: #051f3e;text-align: center;"> <b>Please select your school</b></p>
                                <br><br>
                                <select onchange="getSchoolDetails(this.value)" id="schools" style="text-align: center;"
                                    id="class_sector" class="select2">
                                    <option value="">CLICK TO SELECT YOUR SCHOOL</option>
                                </select>
                            </div>

                            <div id="sign_in_as" class="row" hidden>
                                <p style="color: #051f3e;text-align: center;"> <b>SignIn As ?</b></p><br>
                                <div class="col-md-6">
                                    <div onclick=" window.location.href = 'student';" class="card">
                                        <h2
                                            style="font-weight: bold; font-family: Poppins; color:#051f3e; text-align: center;">
                                            <i class="fas fa-user-graduate"></i>
                                        </h2>
                                        <h4 class="user"
                                            style="font-family: Poppins; color:#051f3e; text-align: center; cursor: pointer;">
                                            STUDENT
                                        </h4>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div onclick=" window.location.href = 'teacher';" class="card">

                                        <h2
                                            style="font-weight: bold; font-family: Poppins; color:#051f3e; text-align: center;">
                                            <i class="fas fa-chalkboard-teacher"></i>
                                        </h2>
                                        <h4 class="user"
                                            style="font-family: Poppins; color:#051f3e; text-align: center;">
                                            TEACHER
                                        </h4>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div onclick=" window.location.href = 'admin';" class="card">

                                        <h2
                                            style="font-weight: bold; font-family: Poppins; color:#051f3e; text-align: center;">
                                            <i class="fas fa-user-cog"></i>
                                        </h2>
                                        <h4 class="user"
                                            style="font-family: Poppins; color:#051f3e; text-align: center;">
                                            ADMIN
                                        </h4>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div onclick=" window.location.href = 'bursary';" class="card">
                                        <h2
                                            style="font-weight: bold; font-family: Poppins; color:#051f3e; text-align: center;">
                                            <i class="fas fa-hand-holding-usd"></i>
                                        </h2>
                                        <h4 class="user"
                                            style="font-family: Poppins; color:#051f3e; text-align: center;">
                                            BURSARY
                                        </h4>
                                    </div>
                                </div>

                                <p onclick="changeSchool()" style="color: red;text-align: center;">
                                    <b>Change school</b>
                                </p><br>

                            </div>

                        </div>
                        <footer class="footer">
                            <div style="display: flex;
                            justify-content: center; font-family: Poppins;" class="copyright"><a
                                    style="color: #051f3e;" href="#"><b><small> Â© 2023
                                            Dextroux Technologies</small></b></a></div>
                        </footer>
                    </div>

                </div>

            </div>

        </div>
    </div>

</body>

<script src="asset/js/jquery-3.2.1.min.js"></script>
<script src="asset/js/popper.min.js"></script>
<script src="asset/js/bootstrap.min.js"></script>
<script src="asset/plugins/scroll-fixed/jquery-scrolltofixed-min.js"></script>
<script src="asset/js/script.js"></script>
<script src="common-library.js"></script>
<script src="./js/student.js"></script>
<script src="assets/js/lib/toastr/toastr.min.js"></script>
<script src="assets/js/lib/toastr/toastr.init.js"></script>
<script src="assets/js/lib/sweetalert/sweetalert.min.js"></script>
<script src="assets/js/lib/sweetalert/sweetalert.init.js"></script>
<!-- Select 2 Js -->
<script src="./js/select2.min.js"></script>
<script src="js/app.js?v=1"></script>

<style>
    .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        border-radius: 15px;
        max-width: 150px;
        margin: auto;
        margin-top: 8px;
        text-align: center;
        font-family: arial;
    }

    .title {
        color: grey;
        font-size: 18px;
    }

    button {
        border: none;
        outline: 0;
        display: inline-block;
        padding: 8px;
        color: white;
        background-color: #000;
        text-align: center;
        cursor: pointer;
        width: 100%;
        font-size: 18px;
    }

    a {
        text-decoration: none;
        font-size: 22px;
        color: black;
    }

    button:hover,
    a:hover {
        opacity: 0.7;
    }

    .card :hover i {
        color: #ff9d01;
    }

    .login-container {
        max-height: 100vh;
        overflow-y: auto;
        scrollbar-width: none;
        scrollbar-width: none;
        /* Hide the scrollbar in Firefox */
        -ms-overflow-style: none;
        /* Hide the scrollbar in Internet Explorer and Edge */
    }

    /* Hide the scrollbar in Chrome, Safari, and Opera */
    .container::-webkit-scrollbar {
        width: 0.5em;
    }

    .container::-webkit-scrollbar-thumb {
        background-color: #999;
    }
</style>

<script type="module">
    import Config from './utils/js/config.js';
    const config = new Config();
    localStorage.setItem("ip", config.url.ip);
    localStorage.setItem("domain", config.url.domain);
</script>

<script>
    function getSchools() {
        var route = "https://smartschoolhub.net/backend/website/api/schools";
        // var route = "http://localhost:8001/api/schools"
        openSpinnerModal("Loading schools ...");
        var ip = localStorage["ip"];
        fetch(route, {
            method: "GET",
            headers: {
                Accept: "application/json",
                "school": localStorage["school"],
                "Content-type": "application/json",
            },
        })
            .then(function (res) {
                return res.json();
            })

            .then((data) => {
                removeSpinnerModal();
                document.getElementById('schools').innerHTML = ``;
                data.forEach(school => {
                    document.getElementById('schools').innerHTML +=
                        `
                    <option style="text-align:center; padding-left:50px" value="${school.alias}">${school.name}</option>
                `;
                });
            })
            .catch((err) => {
                removeSpinnerModal();
                errortoast("Something went wrong, please re-fresh.")
            });
    }

    function getSchoolDetails(school) {
        if (school == "") {
            return 0;
        }
        openSpinnerModal("School Details");
        var ip = localStorage["ip"];
        fetch(ip + "/api/general/school-details", {
            method: "GET",
            headers: {
                Accept: "application/json",
                "school": school,
                "Content-type": "application/json",
            },
        })
            .then(function (res) {
                return res.json();
            })
            .then((data) => {
                removeSpinnerModal();
                localStorage.setItem('SCHOOL_NAME', data[0].school_name)
                localStorage.setItem('SCHOOL_ADDRESS', data[0].school_address)
                document.getElementById("school_name").innerHTML = "Welcome , <br>" + localStorage['SCHOOL_NAME'];
                document.getElementById("title").innerHTML = "SMARTSCHOOLHUB.NET | " + localStorage['SCHOOL_NAME'];


                document.getElementById("sign_in_as").hidden = false;
                document.getElementById("select_school").hidden = true;
                localStorage.setItem('school', school);

            })
            .catch((err) => {
                removeSpinnerModal();
                errortoast("Something went wrong, please re-fresh.")
            });
    }

    function openSpinnerModal(message) {
        var modal = `<div class="modal fade" id="spinnerModal" tabindex="-1" role="dialog"
aria-labelledby="endModalTitle" aria-hidden="true" data-backdrop="static" data-keyboard="false">
<div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
        <div class="modal-body text-center">
        <div class="spinner-grow text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-secondary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-success" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-danger" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-warning" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-info" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-light" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <div class="spinner-grow text-dark" role="status">
        <span class="sr-only">Loading...</span>
      </div>
        </div>

        <h4 style="font-family: Poppins; font-weight: bold;"
                class="modal-title col-12 text-center" id="spinnerModalTitle">
                <b>${message != null || message != "" ? message : ``} </b><br/>
                <b>Processing ...</b>
            </h4>
            <br>
    </div>
</div>
</div>
`;

        var spinnerModal = parent.document.getElementById("spinnerModal");
        if (spinnerModal != null) {
            return 0;
        }

        parent.$("body").append(modal);
        parent.$("#spinnerModal").modal({ backdrop: "static", keyboard: false });
        parent.$("#spinnerModal").modal("show");
    }

    function removeSpinnerModal() {
        var spinnerModal = parent.document.getElementById("spinnerModal");
        if (spinnerModal != null) {
            parent.$("#spinnerModal").modal("hide");
            parent.document.getElementById("spinnerModal").remove();
        }

        const backdrop = document.querySelector('.modal-backdrop fade show');
        if (backdrop) {
            parent.backdrop.remove()
        }
    }

    function changeSchool() {
        getSchools();
        document.getElementById("school_name").innerHTML = "Welcome !";
        document.getElementById("schools").selectedIndex = 0;
        document.getElementById("sign_in_as").hidden = true;
        document.getElementById("select_school").hidden = false;
        localStorage.removeItem("school");
    }

    function isSchoolSet() {
        if ("school" in localStorage) {
            getSchoolDetails(localStorage["school"]);
            document.getElementById("select_school").hidden = true;
            document.getElementById("sign_in_as").hidden = false;
        }
    }

    window.addEventListener("load", () => {
        isSchoolSet();
        getSchools();
        //getSchoolDetails();
    }
    );


    function errortoast(message, time) {
        toastr.error(message, "", {
            positionClass: "toast-top-center",
            timeOut: time,
            closeButton: true,
            debug: false,
            newestOnTop: true,
            progressBar: true,
            preventDuplicates: true,
            onclick: null,
            showDuration: "300",
            hideDuration: "1000",
            extendedTimeOut: "1000",
            showEasing: "swing",
            hideEasing: "linear",
            showMethod: "fadeIn",
            hideMethod: "fadeOut",
            tapToDismiss: false,
        });
    }

</script>


<script>

    $(document).click(function (e) {
        spinnerModal = parent.document.getElementById("spinnerModal");
        authenticationModal = parent.document.getElementById("authenticationModal");
        if (spinnerModal == null && authenticationModal == null) {
            const backdrop = document.getElementsByClassName("modal-backdrop fade show");
            Array.from(backdrop).forEach(function (bd) {
                bd.remove();
            });
        }
    });

</script>
<!-- Mirrored from www.smarteyeapps.com/demo/html5-template-login-page/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 15 Oct 2021 08:09:14 GMT -->

</html>